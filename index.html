<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MirApp - Ø¨Ø§Ù†Ú© MB Ø±ÙˆØ³ÛŒÙ‡</title>
    
    <style>
        /* ===== Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ CSS ===== */
        :root {
            --primary-bg: #0a3d2f;
            --secondary-bg: #115e59;
            --accent-teal: #2dd4bf;
            --accent-teal-light: #5eead4;
            --gold-text: #fbbf24;
            --text-primary: #ffffff;
            --text-secondary: #e2e8f0;
            --card-bg: rgba(255, 255, 255, 0.08);
            --card-border: rgba(255, 255, 255, 0.12);
            --border-radius: 20px;
            --border-radius-sm: 12px;
            --shadow-md: 0 10px 30px rgba(0, 0, 0, 0.4);
            --shadow-lg: 0 15px 40px rgba(45, 212, 191, 0.5);
            --transition: all 0.3s ease;
        }
        
        /* ===== Reset ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: system-ui, -apple-system, 'Segoe UI', 'Vazirmatn', sans-serif;
            background: linear-gradient(135deg, var(--primary-bg) 0%, var(--secondary-bg) 100%);
            color: var(--text-primary);
            min-height: 100vh;
            line-height: 1.6;
            padding: 20px;
            direction: rtl;
        }
        
        .app-container {
            max-width: 1200px;
            margin: 0 auto;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            gap: 25px;
        }
        
        /* ===== Header ===== */
        .app-header {
            background: var(--card-bg);
            backdrop-filter: blur(20px);
            border: 1px solid var(--card-border);
            border-radius: var(--border-radius);
            padding: 15px 20px;
            box-shadow: var(--shadow-md);
            position: relative;
        }
        
        .header-top {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 15px;
            position: relative;
        }
        
        .app-main-title {
            font-size: 2.2rem;
            background: linear-gradient(45deg, var(--gold-text), var(--accent-teal-light));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            font-weight: 800;
            text-align: center;
            flex: 1;
        }
        
        /* ===== Language Selector ===== */
        .language-selector {
            position: absolute;
            top: 15px;
            left: 15px;
        }
        
        .language-dropdown {
            background: rgba(255, 255, 255, 0.1);
            color: var(--text-primary);
            border: 1px solid var(--accent-teal);
            border-radius: var(--border-radius-sm);
            padding: 8px 12px;
            font-size: 0.9rem;
            cursor: pointer;
            min-width: 130px;
        }
        
        /* ===== DateTime Row ===== */
        .datetime-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(255, 255, 255, 0.05);
            padding: 12px 20px;
            border-radius: var(--border-radius-sm);
            border: 1px solid var(--card-border);
        }
        
        .date-column {
            text-align: right;
            flex: 1;
        }
        
        .hijri-date {
            font-size: 1.1rem;
            font-weight: 700;
            color: var(--gold-text);
            margin-bottom: 5px;
        }
        
        .gregorian-date {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--accent-teal);
            font-family: monospace;
            direction: ltr;
        }
        
        .time-column {
            display: flex;
            align-items: center;
            gap: 20px;
        }
        
        .digital-clock {
            font-size: 1.8rem;
            font-weight: 700;
            font-family: 'Courier New', monospace;
            color: var(--text-primary);
            direction: ltr;
        }
        
        .weather-brief {
            display: flex;
            align-items: center;
            gap: 10px;
            color: var(--text-secondary);
        }
        
        /* ===== Square Buttons Grid ===== */
        .square-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }
        
        @media (min-width: 768px) {
            .square-grid {
                grid-template-columns: repeat(4, 1fr);
                gap: 20px;
            }
        }
        
        .square-btn {
            background: linear-gradient(145deg, 
                rgba(45, 212, 191, 0.15), 
                rgba(20, 184, 166, 0.1));
            backdrop-filter: blur(20px);
            border: 2px solid var(--accent-teal);
            border-radius: var(--border-radius-sm);
            padding: 20px 15px;
            color: var(--gold-text);
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 12px;
            height: 120px;
            text-decoration: none;
            aspect-ratio: 1/1;
            border: none;
            font-family: inherit;
        }
        
        .square-btn:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-lg);
            border-color: var(--accent-teal-light);
            background: linear-gradient(145deg, 
                rgba(45, 212, 191, 0.25), 
                rgba(20, 184, 166, 0.15));
        }
        
        .square-icon {
            width: 50px;
            height: 50px;
            background: linear-gradient(45deg, var(--accent-teal), var(--accent-teal-light));
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            color: var(--primary-bg);
        }
        
        .square-text {
            font-size: 1rem;
            font-weight: 600;
            color: var(--gold-text);
            text-align: center;
            line-height: 1.3;
        }
        
        /* ===== Panels ===== */
        .panel-container {
            position: fixed;
            top: 0;
            right: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--primary-bg) 0%, var(--secondary-bg) 100%);
            z-index: 1000;
            padding: 20px;
            overflow-y: auto;
            display: none;
        }
        
        .panel-container.active {
            display: block;
            animation: slideIn 0.3s ease;
        }
        
        @keyframes slideIn {
            from { transform: translateX(100%); }
            to { transform: translateX(0); }
        }
        
        .panel-header {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid var(--accent-teal);
        }
        
        .back-btn {
            background: var(--accent-teal);
            border: none;
            border-radius: 12px;
            padding: 10px 18px;
            color: var(--primary-bg);
            font-weight: 700;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: var(--transition);
        }
        
        .back-btn:hover {
            background: var(--accent-teal-light);
            transform: translateX(-5px);
        }
        
        .panel-header h2 {
            font-size: 1.5rem;
            color: var(--gold-text);
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        /* ===== Overlay ===== */
        .overlay {
            position: fixed;
            top: 0;
            right: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(5px);
            z-index: 999;
            display: none;
        }
        
        .overlay.active {
            display: block;
        }
        
        /* ===== CBR Rates ===== */
        .rate-card {
            background: var(--card-bg);
            border: 1px solid var(--card-border);
            border-radius: var(--border-radius-sm);
            padding: 20px;
            margin-bottom: 20px;
        }
        
        .rate-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .rate-title {
            font-size: 1.1rem;
            color: var(--gold-text);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .rate-date {
            color: var(--text-secondary);
            font-size: 0.9rem;
            direction: ltr;
        }
        
        .rate-value {
            font-size: 2rem;
            font-weight: 700;
            color: var(--accent-teal);
            margin: 10px 0;
        }
        
        .rate-change {
            color: var(--text-secondary);
            font-size: 0.95rem;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .positive { color: #4ade80; }
        .negative { color: #f87171; }
        
        .exchange-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
            margin-top: 20px;
        }
        
        @media (min-width: 768px) {
            .exchange-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        .exchange-card {
            background: rgba(255, 255, 255, 0.05);
            border-radius: var(--border-radius-sm);
            padding: 15px;
        }
        
        .currency-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }
        
        .currency-name {
            display: flex;
            align-items: center;
            gap: 10px;
            color: var(--text-secondary);
        }
        
        .currency-rate {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--gold-text);
            margin: 5px 0;
            direction: ltr;
        }
        
        .currency-dates {
            display: flex;
            justify-content: space-between;
            margin: 10px 0;
            padding: 10px 0;
            border-top: 1px dashed rgba(255, 255, 255, 0.1);
            border-bottom: 1px dashed rgba(255, 255, 255, 0.1);
        }
        
        .date-item {
            text-align: center;
            flex: 1;
        }
        
        .date-label {
            color: var(--text-secondary);
            font-size: 0.85rem;
            margin-bottom: 5px;
        }
        
        .date-value {
            color: var(--text-secondary);
            font-size: 0.9rem;
            direction: ltr;
        }
        
        /* ===== AI Chat ===== */
        .chat-container {
            background: var(--card-bg);
            border: 1px solid var(--card-border);
            border-radius: var(--border-radius);
            padding: 20px;
            height: 500px;
            display: flex;
            flex-direction: column;
        }
        
        .chat-messages {
            flex: 1;
            overflow-y: auto;
            margin-bottom: 20px;
            padding: 10px;
        }
        
        .message {
            margin-bottom: 15px;
            animation: fadeIn 0.3s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .message-content {
            display: inline-flex;
            align-items: flex-start;
            gap: 10px;
            max-width: 80%;
            padding: 15px;
            border-radius: var(--border-radius-sm);
            background: rgba(255, 255, 255, 0.1);
        }
        
        .message.user .message-content {
            background: rgba(45, 212, 191, 0.2);
        }
        
        .chat-input-container {
            display: flex;
            gap: 10px;
        }
        
        .chat-input-container textarea {
            flex: 1;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid var(--card-border);
            border-radius: var(--border-radius-sm);
            padding: 15px;
            color: var(--text-primary);
            font-size: 1rem;
            resize: none;
            font-family: inherit;
        }
        
        .send-btn {
            background: var(--accent-teal);
            color: var(--primary-bg);
            border: none;
            border-radius: var(--border-radius-sm);
            padding: 0 25px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .send-btn:hover {
            background: var(--accent-teal-light);
        }
        
        /* ===== Translator ===== */
        .translator-container {
            background: var(--card-bg);
            border: 1px solid var(--card-border);
            border-radius: var(--border-radius);
            padding: 25px;
            margin-bottom: 25px;
        }
        
        .translator-container textarea {
            width: 100%;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid var(--card-border);
            border-radius: var(--border-radius-sm);
            padding: 20px;
            color: var(--text-primary);
            font-size: 1rem;
            resize: none;
            font-family: inherit;
            margin-bottom: 20px;
            min-height: 150px;
        }
        
        .translate-btn {
            background: linear-gradient(45deg, var(--accent-teal), var(--accent-teal-light));
            color: var(--primary-bg);
            border: none;
            border-radius: var(--border-radius-sm);
            padding: 15px 30px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 15px;
            transition: var(--transition);
            width: 100%;
            justify-content: center;
            margin-top: 20px;
        }
        
        .translate-btn:hover {
            transform: translateY(-2px);
        }
        
        /* ===== Calculator ===== */
        .calculator-container {
            background: var(--card-bg);
            border: 1px solid var(--card-border);
            border-radius: var(--border-radius);
            padding: 25px;
        }
        
        .calculator-display input {
            width: 100%;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid var(--card-border);
            border-radius: var(--border-radius-sm);
            padding: 20px;
            color: var(--text-primary);
            font-size: 1.5rem;
            text-align: left;
            direction: ltr;
            font-family: monospace;
            margin-bottom: 20px;
        }
        
        .calculator-buttons {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
        }
        
        .calc-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid var(--card-border);
            border-radius: var(--border-radius-sm);
            padding: 15px;
            color: var(--text-primary);
            font-size: 1.2rem;
            cursor: pointer;
            transition: var(--transition);
        }
        
        .calc-btn:hover {
            background: rgba(45, 212, 191, 0.2);
        }
        
        .calc-btn.equals {
            background: var(--accent-teal);
            color: var(--primary-bg);
        }
        
        /* ===== Settings ===== */
        .app-info-card {
            background: var(--card-bg);
            border: 1px solid var(--card-border);
            border-radius: var(--border-radius);
            padding: 30px;
            margin-bottom: 25px;
        }
        
        /* ===== Responsive ===== */
        @media (max-width: 480px) {
            .datetime-row {
                flex-direction: column;
                gap: 10px;
                align-items: flex-start;
            }
            
            .time-column {
                align-self: flex-end;
            }
            
            .square-btn {
                height: 110px;
                padding: 15px 10px;
            }
            
            .square-icon {
                width: 45px;
                height: 45px;
                font-size: 20px;
            }
            
            .square-text {
                font-size: 0.9rem;
            }
        }
        
        /* ===== Contact Menu ===== */
        .contact-menu {
            position: absolute;
            top: calc(100% + 10px);
            right: 0;
            left: 0;
            background: var(--card-bg);
            border: 1px solid var(--accent-teal);
            border-radius: var(--border-radius-sm);
            box-shadow: var(--shadow-lg);
            z-index: 1000;
            overflow: hidden;
            display: none;
        }
        
        .contact-menu.active {
            display: block;
        }
        
        .contact-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 15px;
            color: var(--text-primary);
            text-decoration: none;
            transition: var(--transition);
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .contact-item:last-child {
            border-bottom: none;
        }
        
        .contact-item:hover {
            background: rgba(45, 212, 191, 0.2);
        }
    </style>
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="app-header">
            <div class="header-top">
                <div class="language-selector">
                    <select id="languageSelect" class="language-dropdown">
                        <option value="fa">ÙØ§Ø±Ø³ÛŒ ğŸ‡®ğŸ‡·</option>
                        <option value="en">English ğŸ‡ºğŸ‡¸</option>
                        <option value="ru">Ğ ÑƒÑÑĞºĞ¸Ğ¹ ğŸ‡·ğŸ‡º</option>
                    </select>
                </div>
                <h1 class="app-main-title">MirApp</h1>
            </div>
            
            <!-- DateTime Row -->
            <div class="datetime-row">
                <div class="date-column">
                    <div class="hijri-date" id="hijriDate">Û±Û´Û°Û´ Ø¨Ù‡Ù…Ù† Û²Ûµ</div>
                    <div class="gregorian-date" id="gregorianDate">14 January 2026</div>
                </div>
                <div class="time-column">
                    <div class="digital-clock" id="digitalClock">14:30</div>
                    <div class="weather-brief">
                        <span class="icon">ğŸŒ¡ï¸</span>
                        <span id="currentTemp">-2Â°C</span>
                    </div>
                </div>
            </div>
        </header>

        <!-- Main Grid -->
        <div class="square-grid">
            <!-- Ø§ÛŒÙ†ØªØ±Ù†Øª Ø¨Ø§Ù†Ú© -->
            <a href="https://ibank.mbbru.ru:1443/web_banking/protected/welcome.jsf" target="_blank" class="square-btn">
                <div class="square-icon">ğŸ¦</div>
                <span class="square-text">Ø§ÛŒÙ†ØªØ±Ù†Øª Ø¨Ø§Ù†Ú©</span>
            </a>

            <!-- Ù†Ø±Ø® Ø±ÙˆØ¨Ù„/Ø±ÛŒØ§Ù„ -->
            <a href="https://www.mbbru.ru/fizicheskim-litsam/mb-rial/" target="_blank" class="square-btn">
                <div class="square-icon">ğŸ’±</div>
                <span class="square-text">Ù†Ø±Ø® Ø±ÙˆØ¨Ù„/Ø±ÛŒØ§Ù„</span>
            </a>

            <!-- Ù†Ø±Ø® CB Ø±ÙˆØ³ÛŒÙ‡ -->
            <button class="square-btn" id="reportBtn">
                <div class="square-icon">ğŸ“Š</div>
                <span class="square-text">Ù†Ø±Ø® CB Ø±ÙˆØ³ÛŒÙ‡</span>
            </button>

            <!-- Ø§Ø®Ø¨Ø§Ø± CB Ø±ÙˆØ³ÛŒÙ‡ -->
            <button class="square-btn" id="newsBtn">
                <div class="square-icon">ğŸ“°</div>
                <span class="square-text">Ø§Ø®Ø¨Ø§Ø± CB Ø±ÙˆØ³ÛŒÙ‡</span>
            </button>

            <!-- ÙˆØ¶Ø¹ÛŒØª Ø¬ÙˆÛŒ -->
            <button class="square-btn" id="weatherBtn">
                <div class="square-icon">â˜ï¸</div>
                <span class="square-text">ÙˆØ¶Ø¹ÛŒØª Ø¬ÙˆÛŒ</span>
            </button>

            <!-- Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ -->
            <button class="square-btn" id="aiBtn">
                <div class="square-icon">ğŸ¤–</div>
                <span class="square-text">Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ</span>
            </button>

            <!-- Ù…ØªØ±Ø¬Ù… -->
            <button class="square-btn" id="translatorBtn">
                <div class="square-icon">ğŸŒ</div>
                <span class="square-text">Ù…ØªØ±Ø¬Ù…</span>
            </button>

            <!-- Ø´Ø¹Ø¨ Ø¨Ø§Ù†Ú© -->
            <a href="https://www.mbbru.ru/o-banke/" target="_blank" class="square-btn">
                <div class="square-icon">ğŸ“</div>
                <span class="square-text">Ø´Ø¹Ø¨ Ø¨Ø§Ù†Ú©</span>
            </a>

            <!-- Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ù…Ø§ -->
            <div style="position: relative;">
                <button class="square-btn" id="contactBtn">
                    <div class="square-icon">ğŸ“</div>
                    <span class="square-text">Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ù…Ø§</span>
                </button>
                <div class="contact-menu" id="contactMenu">
                    <a href="tel:+78005000751" class="contact-item">
                        <span class="icon">ğŸ“±</span>
                        <div>
                            <div style="font-weight: bold;">ØªÙ…Ø§Ø³ Ø¨Ø§ Ú©Ø§Ø±Ø´Ù†Ø§Ø³Ø§Ù†</div>
                            <div style="direction: ltr; font-family: monospace; font-size: 0.9rem;">+7 800 500-07-51</div>
                        </div>
                    </a>
                    <a href="mailto:info@mbbru.ru" class="contact-item">
                        <span class="icon">âœ‰ï¸</span>
                        <div>
                            <div style="font-weight: bold;">Ø§Ø±Ø³Ø§Ù„ Ø§ÛŒÙ…ÛŒÙ„</div>
                            <div style="direction: ltr; font-family: monospace; font-size: 0.9rem;">info@mbbru.ru</div>
                        </div>
                    </a>
                    <a href="https://t.me/mbbru_ru" target="_blank" class="contact-item">
                        <span class="icon">ğŸ“¢</span>
                        <div>
                            <div style="font-weight: bold;">Ú©Ø§Ù†Ø§Ù„ ØªÙ„Ú¯Ø±Ø§Ù… Ø¨Ø§Ù†Ú©</div>
                            <div style="direction: ltr; font-family: monospace; font-size: 0.9rem;">@mbbru_ru</div>
                        </div>
                    </a>
                </div>
            </div>

            <!-- ØªÙ†Ø¸ÛŒÙ…Ø§Øª -->
            <button class="square-btn" id="settingsBtn">
                <div class="square-icon">âš™ï¸</div>
                <span class="square-text">ØªÙ†Ø¸ÛŒÙ…Ø§Øª</span>
            </button>

            <!-- Ù…Ø§Ø´ÛŒÙ† Ø­Ø³Ø§Ø¨ -->
            <button class="square-btn" id="calculatorBtn">
                <div class="square-icon">ğŸ§®</div>
                <span class="square-text">Ù…Ø§Ø´ÛŒÙ† Ø­Ø³Ø§Ø¨</span>
            </button>
        </div>
    </div>

    <!-- Overlay -->
    <div class="overlay" id="overlay"></div>

    <!-- Panels will be created dynamically -->

    <script>
        // ===== MIRAPP - COMPLETE WORKING VERSION =====
        
        console.log("MirApp Ø¯Ø± Ø­Ø§Ù„ Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ...");
        
        // ===== Ù…ØªØºÛŒØ±Ù‡Ø§ÛŒ Ø³Ø±Ø§Ø³Ø±ÛŒ =====
        let currentPanel = null;
        let currentLanguage = 'fa';
        
        // ===== ØªØ±Ø¬Ù…Ù‡â€ŒÙ‡Ø§ÛŒ Ø¨Ø±Ù†Ø§Ù…Ù‡ =====
        const translations = {
            fa: {
                appTitle: "MirApp",
                internetBank: "Ø§ÛŒÙ†ØªØ±Ù†Øª Ø¨Ø§Ù†Ú©",
                rialRate: "Ù†Ø±Ø® Ø±ÙˆØ¨Ù„/Ø±ÛŒØ§Ù„",
                cbrRates: "Ù†Ø±Ø® CB Ø±ÙˆØ³ÛŒÙ‡",
                cbrNews: "Ø§Ø®Ø¨Ø§Ø± CB Ø±ÙˆØ³ÛŒÙ‡",
                weather: "ÙˆØ¶Ø¹ÛŒØª Ø¬ÙˆÛŒ",
                aiAssistant: "Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ",
                translator: "Ù…ØªØ±Ø¬Ù…",
                bankBranches: "Ø´Ø¹Ø¨ Ø¨Ø§Ù†Ú©",
                contactUs: "Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ù…Ø§",
                settings: "ØªÙ†Ø¸ÛŒÙ…Ø§Øª",
                calculator: "Ù…Ø§Ø´ÛŒÙ† Ø­Ø³Ø§Ø¨",
                back: "Ø¨Ø§Ø²Ú¯Ø´Øª",
                refresh: "Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ",
                source: "Ù…Ù†Ø¨Ø¹",
                lastUpdate: "Ø¢Ø®Ø±ÛŒÙ† Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ",
                aiPlaceholder: "Ø³ÙˆØ§Ù„ Ø®ÙˆØ¯ Ø±Ø§ Ø§ÛŒÙ†Ø¬Ø§ Ø¨Ù†ÙˆÛŒØ³ÛŒØ¯...",
                send: "Ø§Ø±Ø³Ø§Ù„",
                translatePlaceholder: "Ù…ØªÙ† Ø±Ø§ Ø¨Ø±Ø§ÛŒ ØªØ±Ø¬Ù…Ù‡ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯...",
                translate: "ØªØ±Ø¬Ù…Ù‡",
                targetLanguage: "Ø²Ø¨Ø§Ù† Ù…Ù‚ØµØ¯:",
                copy: "Ú©Ù¾ÛŒ",
                clearCache: "Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† Ø­Ø§ÙØ¸Ù‡",
                refreshAll: "Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ù‡Ù…Ù‡ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§"
            },
            en: {
                appTitle: "MirApp",
                internetBank: "Internet Bank",
                rialRate: "Rial/Ruble Rate",
                cbrRates: "CBR Rates",
                cbrNews: "CBR News",
                weather: "Weather",
                aiAssistant: "AI Assistant",
                translator: "Translator",
                bankBranches: "Bank Branches",
                contactUs: "Contact Us",
                settings: "Settings",
                calculator: "Calculator",
                back: "Back",
                refresh: "Refresh",
                source: "Source",
                lastUpdate: "Last update",
                aiPlaceholder: "Type your question here...",
                send: "Send",
                translatePlaceholder: "Enter text to translate...",
                translate: "Translate",
                targetLanguage: "Target language:",
                copy: "Copy",
                clearCache: "Clear Cache",
                refreshAll: "Refresh All Data"
            },
            ru: {
                appTitle: "MirApp",
                internetBank: "Ğ˜Ğ½Ñ‚ĞµÑ€Ğ½ĞµÑ‚-Ğ±Ğ°Ğ½Ğº",
                rialRate: "ĞšÑƒÑ€Ñ Ñ€Ğ¸Ğ°Ğ»/Ñ€ÑƒĞ±Ğ»ÑŒ",
                cbrRates: "ĞšÑƒÑ€ÑÑ‹ Ğ¦Ğ‘",
                cbrNews: "ĞĞ¾Ğ²Ğ¾ÑÑ‚Ğ¸ Ğ¦Ğ‘",
                weather: "ĞŸĞ¾Ğ³Ğ¾Ğ´Ğ°",
                aiAssistant: "Ğ˜Ğ˜ ĞŸĞ¾Ğ¼Ğ¾Ñ‰Ğ½Ğ¸Ğº",
                translator: "ĞŸĞµÑ€ĞµĞ²Ğ¾Ğ´Ñ‡Ğ¸Ğº",
                bankBranches: "ĞÑ‚Ğ´ĞµĞ»ĞµĞ½Ğ¸Ñ Ğ±Ğ°Ğ½ĞºĞ°",
                contactUs: "Ğ¡Ğ²ÑĞ·Ğ°Ñ‚ÑŒÑÑ Ñ Ğ½Ğ°Ğ¼Ğ¸",
                settings: "ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸",
                calculator: "ĞšĞ°Ğ»ÑŒĞºÑƒĞ»ÑÑ‚Ğ¾Ñ€",
                back: "ĞĞ°Ğ·Ğ°Ğ´",
                refresh: "ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ",
                source: "Ğ˜ÑÑ‚Ğ¾Ñ‡Ğ½Ğ¸Ğº",
                lastUpdate: "ĞŸĞ¾ÑĞ»ĞµĞ´Ğ½ĞµĞµ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ",
                aiPlaceholder: "Ğ’Ğ²ĞµĞ´Ğ¸Ñ‚Ğµ Ğ²Ğ°Ñˆ Ğ²Ğ¾Ğ¿Ñ€Ğ¾Ñ Ğ·Ğ´ĞµÑÑŒ...",
                send: "ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ¸Ñ‚ÑŒ",
                translatePlaceholder: "Ğ’Ğ²ĞµĞ´Ğ¸Ñ‚Ğµ Ñ‚ĞµĞºÑÑ‚ Ğ´Ğ»Ñ Ğ¿ĞµÑ€ĞµĞ²Ğ¾Ğ´Ğ°...",
                translate: "ĞŸĞµÑ€ĞµĞ²ĞµÑÑ‚Ğ¸",
                targetLanguage: "Ğ¦ĞµĞ»ĞµĞ²Ğ¾Ğ¹ ÑĞ·Ñ‹Ğº:",
                copy: "ĞšĞ¾Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ",
                clearCache: "ĞÑ‡Ğ¸ÑÑ‚Ğ¸Ñ‚ÑŒ ĞºÑÑˆ",
                refreshAll: "ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ğ²ÑĞµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ"
            }
        };
        
        // ===== ØªØ§Ø±ÛŒØ® Ùˆ Ø²Ù…Ø§Ù† =====
        function updateDateTime() {
            const now = new Date();
            
            // ØªØ§Ø±ÛŒØ® Ø´Ù…Ø³ÛŒ
            const persianMonths = ['ÙØ±ÙˆØ±Ø¯ÛŒÙ†', 'Ø§Ø±Ø¯ÛŒØ¨Ù‡Ø´Øª', 'Ø®Ø±Ø¯Ø§Ø¯', 'ØªÛŒØ±', 'Ù…Ø±Ø¯Ø§Ø¯', 'Ø´Ù‡Ø±ÛŒÙˆØ±', 
                                 'Ù…Ù‡Ø±', 'Ø¢Ø¨Ø§Ù†', 'Ø¢Ø°Ø±', 'Ø¯ÛŒ', 'Ø¨Ù‡Ù…Ù†', 'Ø§Ø³ÙÙ†Ø¯'];
            const hijriYear = 1404;
            const hijriDate = `${hijriYear} ${persianMonths[now.getMonth()]} ${now.getDate()}`;
            document.getElementById('hijriDate').textContent = hijriDate;
            
            // ØªØ§Ø±ÛŒØ® Ù…ÛŒÙ„Ø§Ø¯ÛŒ
            const gregorianDate = now.toLocaleDateString('en-US', {
                year: 'numeric',
                month: 'long',
                day: 'numeric',
                weekday: 'long'
            });
            document.getElementById('gregorianDate').textContent = gregorianDate;
            
            // Ø³Ø§Ø¹Øª
            const time = now.toLocaleTimeString('en-GB', {
                hour: '2-digit',
                minute: '2-digit',
                hour12: false
            });
            document.getElementById('digitalClock').textContent = time;
        }
        
        // ===== ØªØºÛŒÛŒØ± Ø²Ø¨Ø§Ù† =====
        function changeLanguage(lang) {
            currentLanguage = lang;
            
            // ØªØºÛŒÛŒØ± Ù…ØªÙ† Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§
            document.querySelectorAll('.square-text').forEach((element, index) => {
                const keys = ['internetBank', 'rialRate', 'cbrRates', 'cbrNews', 'weather', 
                            'aiAssistant', 'translator', 'bankBranches', 'contactUs', 'settings', 'calculator'];
                if (keys[index]) {
                    element.textContent = translations[lang][keys[index]];
                }
            });
            
            // ØªØºÛŒÛŒØ± Ø¹Ù†ÙˆØ§Ù† Ø¨Ø±Ù†Ø§Ù…Ù‡
            document.querySelector('.app-main-title').textContent = translations[lang].appTitle;
            
            // Ø°Ø®ÛŒØ±Ù‡ Ø²Ø¨Ø§Ù† Ø§Ù†ØªØ®Ø§Ø¨ Ø´Ø¯Ù‡
            localStorage.setItem('mirAppLanguage', lang);
            
            // Ù†Ù…Ø§ÛŒØ´ Ù¾ÛŒØ§Ù…
            showToast(lang === 'fa' ? 'Ø²Ø¨Ø§Ù† Ø¨Ù‡ ÙØ§Ø±Ø³ÛŒ ØªØºÛŒÛŒØ± Ú©Ø±Ø¯' : 
                     lang === 'en' ? 'Language changed to English' : 'Ğ¯Ğ·Ñ‹Ğº Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½ Ğ½Ğ° Ñ€ÑƒÑÑĞºĞ¸Ğ¹');
        }
        
        // ===== Ù…Ø¯ÛŒØ±ÛŒØª Ù¾Ù†Ù„â€ŒÙ‡Ø§ =====
        function openPanel(panelId) {
            closeCurrentPanel();
            
            // Ø§ÛŒØ¬Ø§Ø¯ Ù¾Ù†Ù„ Ø§Ú¯Ø± ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯
            if (!document.getElementById(panelId)) {
                createPanel(panelId);
            }
            
            const panel = document.getElementById(panelId);
            const overlay = document.getElementById('overlay');
            
            if (panel) {
                panel.classList.add('active');
                overlay.classList.add('active');
                currentPanel = panelId;
            }
        }
        
        function closeCurrentPanel() {
            if (currentPanel) {
                const panel = document.getElementById(currentPanel);
                const overlay = document.getElementById('overlay');
                
                if (panel) panel.classList.remove('active');
                if (overlay) overlay.classList.remove('active');
                
                currentPanel = null;
            }
            
            // Ø¨Ø³ØªÙ† Ù…Ù†ÙˆÛŒ Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ù…Ø§
            document.getElementById('contactMenu').classList.remove('active');
        }
        
        function createPanel(panelId) {
            const panel = document.createElement('div');
            panel.id = panelId;
            panel.className = 'panel-container';
            
            switch(panelId) {
                case 'reportPanel':
                    createReportPanel(panel);
                    break;
                case 'newsPanel':
                    createNewsPanel(panel);
                    break;
                case 'weatherPanel':
                    createWeatherPanel(panel);
                    break;
                case 'aiPanel':
                    createAIPanel(panel);
                    break;
                case 'translatorPanel':
                    createTranslatorPanel(panel);
                    break;
                case 'calculatorPanel':
                    createCalculatorPanel(panel);
                    break;
                case 'settingsPanel':
                    createSettingsPanel(panel);
                    break;
            }
            
            document.body.appendChild(panel);
        }
        
        // ===== Ù¾Ù†Ù„ Ù†Ø±Ø® Ø§Ø±Ø² =====
        function createReportPanel(panel) {
            const today = new Date();
            const yesterday = new Date(today);
            yesterday.setDate(yesterday.getDate() - 1);
            
            const formatDate = (date) => {
                return date.toLocaleDateString('fa-IR', {
                    year: 'numeric',
                    month: '2-digit',
                    day: '2-digit'
                });
            };
            
            panel.innerHTML = `
                <div class="panel-header">
                    <button class="back-btn" onclick="closeCurrentPanel()">
                        <span class="icon">â†</span>
                        <span>${translations[currentLanguage].back}</span>
                    </button>
                    <h2><span class="icon">ğŸ“Š</span> <span>${translations[currentLanguage].cbrRates}</span></h2>
                </div>
                <div style="padding: 20px;">
                    <div style="margin-bottom: 20px; color: var(--text-secondary); display: flex; align-items: center; gap: 10px;">
                        <span class="icon">ğŸ“…</span>
                        <span>${today.toLocaleDateString('fa-IR', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' })}</span>
                    </div>
                    
                    <div class="rate-card">
                        <div class="rate-header">
                            <div class="rate-title">
                                <span class="icon">%</span>
                                <span>Ù†Ø±Ø® Ú©Ù„ÛŒØ¯ÛŒ Ø¨Ø§Ù†Ú© Ù…Ø±Ú©Ø²ÛŒ (ĞºĞ»ÑÑ‡ĞµĞ²Ğ°Ñ ÑÑ‚Ğ°Ğ²ĞºĞ°)</span>
                            </div>
                            <div class="rate-date">${formatDate(today)}</div>
                        </div>
                        <div class="rate-value">Û±Û¶Ù«Û°Û°Ùª</div>
                        <div class="rate-change">
                            <span class="icon">â„¹ï¸</span>
                            <span>Ø¨Ø¯ÙˆÙ† ØªØºÛŒÛŒØ± Ø§Ø² Ø¬Ù„Ø³Ù‡ Ù‚Ø¨Ù„ÛŒ</span>
                        </div>
                    </div>
                    
                    <div class="exchange-grid">
                        <div class="exchange-card">
                            <div class="currency-header">
                                <div class="currency-name">
                                    <span class="icon">ğŸ’µ</span>
                                    <span>Ø¯Ù„Ø§Ø± Ø¢Ù…Ø±ÛŒÚ©Ø§ (USD/RUB)</span>
                                </div>
                            </div>
                            
                            <div class="currency-dates">
                                <div class="date-item">
                                    <div class="date-label">Ø§Ù…Ø±ÙˆØ²</div>
                                    <div class="date-value">${formatDate(today)}</div>
                                </div>
                                <div class="date-item">
                                    <div class="date-label">Ø¯ÛŒØ±ÙˆØ²</div>
                                    <div class="date-value">${formatDate(yesterday)}</div>
                                </div>
                            </div>
                            
                            <div class="currency-rate">
                                Û¸ÛµÙ«Û´Û² â‚½
                                <div class="rate-change positive">
                                    <span class="icon">â†‘</span>
                                    ØªØºÛŒÛŒØ±: +Û°Ù«Û³Û² â‚½
                                </div>
                            </div>
                            
                            <div style="margin-top: 15px;">
                                <div style="color: var(--text-secondary); font-size: 0.9rem;">
                                    Ø¯ÛŒØ±ÙˆØ²: Û¸ÛµÙ«Û±Û° â‚½
                                </div>
                            </div>
                        </div>
                        
                        <div class="exchange-card">
                            <div class="currency-header">
                                <div class="currency-name">
                                    <span class="icon">ğŸ’¶</span>
                                    <span>ÛŒÙˆØ±Ùˆ Ø§ØªØ­Ø§Ø¯ÛŒÙ‡ Ø§Ø±ÙˆÙ¾Ø§ (EUR/RUB)</span>
                                </div>
                            </div>
                            
                            <div class="currency-dates">
                                <div class="date-item">
                                    <div class="date-label">Ø§Ù…Ø±ÙˆØ²</div>
                                    <div class="date-value">${formatDate(today)}</div>
                                </div>
                                <div class="date-item">
                                    <div class="date-label">Ø¯ÛŒØ±ÙˆØ²</div>
                                    <div class="date-value">${formatDate(yesterday)}</div>
                                </div>
                            </div>
                            
                            <div class="currency-rate">
                                Û¹Û²Ù«Û±Ûµ â‚½
                                <div class="rate-change negative">
                                    <span class="icon">â†“</span>
                                    ØªØºÛŒÛŒØ±: -Û°Ù«Û±Û¸ â‚½
                                </div>
                            </div>
                            
                            <div style="margin-top: 15px;">
                                <div style="color: var(--text-secondary); font-size: 0.9rem;">
                                    Ø¯ÛŒØ±ÙˆØ²: Û¹Û²Ù«Û³Û³ â‚½
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div style="margin-top: 25px; padding: 15px; background: rgba(255, 255, 255, 0.05); border-radius: var(--border-radius-sm);">
                        <div style="display: flex; align-items: center; gap: 10px;">
                            <span class="icon">â„¹ï¸</span>
                            <span>${translations[currentLanguage].source}: Ø¨Ø§Ù†Ú© Ù…Ø±Ú©Ø²ÛŒ Ø±ÙˆØ³ÛŒÙ‡ (cbr.ru) - ${translations[currentLanguage].lastUpdate}: ${today.toLocaleString('fa-IR')}</span>
                        </div>
                    </div>
                </div>
            `;
        }
        
        // ===== Ù¾Ù†Ù„ Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ =====
        function createAIPanel(panel) {
            panel.innerHTML = `
                <div class="panel-header">
                    <button class="back-btn" onclick="closeCurrentPanel()">
                        <span class="icon">â†</span>
                        <span>${translations[currentLanguage].back}</span>
                    </button>
                    <h2><span class="icon">ğŸ¤–</span> <span>${translations[currentLanguage].aiAssistant}</span></h2>
                </div>
                <div style="padding: 20px;">
                    <div class="chat-container">
                        <div class="chat-messages" id="aiChatMessages">
                            <div class="message bot">
                                <div class="message-content">
                                    <span class="icon">ğŸ¤–</span>
                                    <div>
                                        <p>Ø³Ù„Ø§Ù…! Ù…Ù† Ø¯Ø³ØªÛŒØ§Ø± Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ MirApp Ù‡Ø³ØªÙ…. Ú†Ø·ÙˆØ± Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ù… Ú©Ù…Ú©â€ŒØªØ§Ù† Ú©Ù†Ù…ØŸ</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="chat-input-container">
                            <textarea id="aiInput" placeholder="${translations[currentLanguage].aiPlaceholder}" rows="3"></textarea>
                            <button class="send-btn" id="sendAI">
                                <span class="icon">âœ‰ï¸</span>
                                <span>${translations[currentLanguage].send}</span>
                            </button>
                        </div>
                    </div>
                    
                    <div style="margin-top: 20px;">
                        <p>Ø³ÙˆØ§Ù„Ø§Øª Ù†Ù…ÙˆÙ†Ù‡:</p>
                        <div style="display: flex; gap: 10px; flex-wrap: wrap; margin-top: 10px;">
                            <button class="example-btn" style="background: rgba(255,255,255,0.1); border: 1px solid var(--card-border); border-radius: 20px; padding: 10px 20px; color: var(--text-secondary); cursor: pointer;" data-question="Ù†Ø±Ø® Ø¯Ù„Ø§Ø± Ø§Ù…Ø±ÙˆØ² Ú†Ù‚Ø¯Ø± Ø§Ø³ØªØŸ">
                                Ù†Ø±Ø® Ø¯Ù„Ø§Ø± Ø§Ù…Ø±ÙˆØ² Ú†Ù‚Ø¯Ø± Ø§Ø³ØªØŸ
                            </button>
                            <button class="example-btn" style="background: rgba(255,255,255,0.1); border: 1px solid var(--card-border); border-radius: 20px; padding: 10px 20px; color: var(--text-secondary); cursor: pointer;" data-question="Ø§Ø®Ø¨Ø§Ø± Ø§Ù‚ØªØµØ§Ø¯ÛŒ Ø§Ù…Ø±ÙˆØ² Ú†ÛŒØ³ØªØŸ">
                                Ø§Ø®Ø¨Ø§Ø± Ø§Ù‚ØªØµØ§Ø¯ÛŒ Ø§Ù…Ø±ÙˆØ² Ú†ÛŒØ³ØªØŸ
                            </button>
                        </div>
                    </div>
                </div>
            `;
            
            // Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† event listeners Ø¨Ø±Ø§ÛŒ Ú†Øª
            setTimeout(() => {
                document.getElementById('sendAI').addEventListener('click', sendAIMessage);
                document.getElementById('aiInput').addEventListener('keypress', function(e) {
                    if (e.key === 'Enter' && !e.shiftKey) {
                        e.preventDefault();
                        sendAIMessage();
                    }
                });
                
                document.querySelectorAll('.example-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        document.getElementById('aiInput').value = this.getAttribute('data-question');
                        sendAIMessage();
                    });
                });
            }, 100);
        }
        
        function sendAIMessage() {
            const input = document.getElementById('aiInput');
            const messages = document.getElementById('aiChatMessages');
            
            if (!input || !messages) return;
            
            const message = input.value.trim();
            if (!message) return;
            
            // Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Ù¾ÛŒØ§Ù… Ú©Ø§Ø±Ø¨Ø±
            const userMessage = document.createElement('div');
            userMessage.className = 'message user';
            userMessage.innerHTML = `
                <div class="message-content">
                    <span class="icon">ğŸ‘¤</span>
                    <div><p>${message}</p></div>
                </div>
            `;
            messages.appendChild(userMessage);
            
            input.value = '';
            
            // Ù¾Ø§Ø³Ø® Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ
            setTimeout(() => {
                const botMessage = document.createElement('div');
                botMessage.className = 'message bot';
                
                let response = getAIResponse(message);
                
                botMessage.innerHTML = `
                    <div class="message-content">
                        <span class="icon">ğŸ¤–</span>
                        <div><p>${response}</p></div>
                    </div>
                `;
                messages.appendChild(botMessage);
                
                messages.scrollTop = messages.scrollHeight;
            }, 1000);
        }
        
        function getAIResponse(message) {
            message = message.toLowerCase();
            
            if (message.includes('Ø¯Ù„Ø§Ø±') || message.includes('usd')) {
                return "Ù†Ø±Ø® Ø¯Ù„Ø§Ø± Ø§Ù…Ø±ÙˆØ²: Û¸ÛµÙ«Û´Û² Ø±ÙˆØ¨Ù„ (Ø¨Ø± Ø§Ø³Ø§Ø³ Ø¢Ø®Ø±ÛŒÙ† Ø§Ø·Ù„Ø§Ø¹Ø§Øª CBR). Ù†Ø³Ø¨Øª Ø¨Ù‡ Ø¯ÛŒØ±ÙˆØ² Û°Ù«Û³Û² Ø±ÙˆØ¨Ù„ Ø§ÙØ²Ø§ÛŒØ´ Ø¯Ø§Ø´ØªÙ‡ Ø§Ø³Øª.";
            } else if (message.includes('ÛŒÙˆØ±Ùˆ') || message.includes('eur')) {
                return "Ù†Ø±Ø® ÛŒÙˆØ±Ùˆ Ø§Ù…Ø±ÙˆØ²: Û¹Û²Ù«Û±Ûµ Ø±ÙˆØ¨Ù„. Ù†Ø³Ø¨Øª Ø¨Ù‡ Ø¯ÛŒØ±ÙˆØ² Û°Ù«Û±Û¸ Ø±ÙˆØ¨Ù„ Ú©Ø§Ù‡Ø´ Ø¯Ø§Ø´ØªÙ‡ Ø§Ø³Øª.";
            } else if (message.includes('Ù†Ø±Ø®') || message.includes('rate')) {
                return "Ù†Ø±Ø® Ú©Ù„ÛŒØ¯ÛŒ Ø¨Ø§Ù†Ú© Ù…Ø±Ú©Ø²ÛŒ Ø±ÙˆØ³ÛŒÙ‡: Û±Û¶Ùª. Ù†Ø±Ø® ØªÙˆØ±Ù…: Û·Ù«Û´Ùª. Ù†Ø±Ø® Ø¨Ù‡Ø±Ù‡ Ø¨ÛŒÙ† Ø¨Ø§Ù†Ú©ÛŒ: Û±ÛµÙ«Û¶ÛµÙª.";
            } else if (message.includes('Ø§Ø®Ø¨Ø§Ø±') || message.includes('news')) {
                return "Ø¢Ø®Ø±ÛŒÙ† Ø§Ø®Ø¨Ø§Ø± CBR:\nÛ±. Ù†Ø±Ø® Ú©Ù„ÛŒØ¯ÛŒ Ø¯Ø± Û±Û¶Ùª Ø­ÙØ¸ Ø´Ø¯\nÛ². Ø°Ø®Ø§ÛŒØ± Ø§Ø±Ø²ÛŒ Ø¨Ù‡ Û¶Û°Ûµ Ù…ÛŒÙ„ÛŒØ§Ø±Ø¯ Ø¯Ù„Ø§Ø± Ø±Ø³ÛŒØ¯\nÛ³. Ø±Ø´Ø¯ Ø§Ù‚ØªØµØ§Ø¯ÛŒ Û²Û°Û²Ûµ: Û²Ù«Û´Ùª";
            } else if (message.includes('Ø³Ù„Ø§Ù…') || message.includes('hello')) {
                return "Ø³Ù„Ø§Ù…! Ù…Ù† Ø¯Ø³ØªÛŒØ§Ø± Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ MirApp Ù‡Ø³ØªÙ…. Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ù… Ø¯Ø± Ù…ÙˆØ±Ø¯:\nâ€¢ Ù†Ø±Ø® Ø§Ø±Ø²\nâ€¢ Ø§Ø®Ø¨Ø§Ø± Ø§Ù‚ØªØµØ§Ø¯ÛŒ\nâ€¢ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¨Ø§Ù†Ú©ÛŒ\nâ€¢ Ùˆ Ø¯ÛŒÚ¯Ø± Ù…ÙˆØ¶ÙˆØ¹Ø§Øª Ø¨Ù‡ Ø´Ù…Ø§ Ú©Ù…Ú© Ú©Ù†Ù….";
            } else {
                return "Ù…ØªÙˆØ¬Ù‡ Ø³ÙˆØ§Ù„ Ø´Ù…Ø§ Ø´Ø¯Ù…. Ù…Ù† Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ù… Ø¯Ø± Ù…ÙˆØ±Ø¯ Ù†Ø±Ø®â€ŒÙ‡Ø§ÛŒ Ø§Ø±Ø²ØŒ Ø§Ø®Ø¨Ø§Ø± Ø§Ù‚ØªØµØ§Ø¯ÛŒØŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø¨Ø§Ù†Ú©ÛŒ Ùˆ Ø³Ø§ÛŒØ± Ù…ÙˆØ¶ÙˆØ¹Ø§Øª Ù…Ø§Ù„ÛŒ Ø¨Ù‡ Ø´Ù…Ø§ Ú©Ù…Ú© Ú©Ù†Ù…. Ù„Ø·ÙØ§Ù‹ Ø³ÙˆØ§Ù„ Ø®ÙˆØ¯ Ø±Ø§ Ø¯Ù‚ÛŒÙ‚â€ŒØªØ± Ù…Ø·Ø±Ø­ Ú©Ù†ÛŒØ¯.";
            }
        }
        
        // ===== Ù¾Ù†Ù„ Ù…ØªØ±Ø¬Ù… =====
        function createTranslatorPanel(panel) {
            panel.innerHTML = `
                <div class="panel-header">
                    <button class="back-btn" onclick="closeCurrentPanel()">
                        <span class="icon">â†</span>
                        <span>${translations[currentLanguage].back}</span>
                    </button>
                    <h2><span class="icon">ğŸŒ</span> <span>${translations[currentLanguage].translator}</span></h2>
                </div>
                <div style="padding: 20px;">
                    <div class="translator-container">
                        <textarea id="translateInput" placeholder="${translations[currentLanguage].translatePlaceholder}"></textarea>
                        
                        <div style="display: flex; gap: 20px; margin-bottom: 20px; flex-wrap: wrap;">
                            <div style="display: flex; flex-direction: column; gap: 10px; flex: 1;">
                                <label>${translations[currentLanguage].targetLanguage}</label>
                                <select id="targetLang" style="background: rgba(255,255,255,0.1); color: var(--text-primary); border: 1px solid var(--card-border); border-radius: var(--border-radius-sm); padding: 12px; font-size: 1rem; cursor: pointer;">
                                    <option value="fa">ÙØ§Ø±Ø³ÛŒ</option>
                                    <option value="en">English</option>
                                    <option value="ru">Ğ ÑƒÑÑĞºĞ¸Ğ¹</option>
                                </select>
                            </div>
                        </div>
                        
                        <button class="translate-btn" id="translateBtn">
                            <span class="icon">ğŸŒ</span>
                            <span>${translations[currentLanguage].translate}</span>
                        </button>
                    </div>
                    
                    <div style="margin-top: 25px; background: var(--card-bg); border: 1px solid var(--card-border); border-radius: var(--border-radius); padding: 25px;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                            <span>Ù†ØªÛŒØ¬Ù‡ ØªØ±Ø¬Ù…Ù‡:</span>
                            <button style="background: rgba(255,255,255,0.1); border: 1px solid var(--card-border); border-radius: var(--border-radius-sm); padding: 8px 15px; color: var(--text-primary); cursor: pointer;" id="copyTranslation">
                                <span class="icon">ğŸ“‹</span>
                                <span>${translations[currentLanguage].copy}</span>
                            </button>
                        </div>
                        <div id="translatedText" style="color: var(--text-secondary); min-height: 100px; padding: 10px;">
                            <p>Ù†ØªÛŒØ¬Ù‡ ØªØ±Ø¬Ù…Ù‡ Ø¯Ø± Ø§ÛŒÙ†Ø¬Ø§ Ù†Ù…Ø§ÛŒØ´ Ø¯Ø§Ø¯Ù‡ Ù…ÛŒâ€ŒØ´ÙˆØ¯...</p>
                        </div>
                    </div>
                    
                    <div style="margin-top: 25px;">
                        <p>Ù…Ø«Ø§Ù„â€ŒÙ‡Ø§ÛŒ ØªØ±Ø¬Ù…Ù‡:</p>
                        <div style="display: grid; grid-template-columns: 1fr; gap: 10px; margin-top: 10px;">
                            <button class="text-example" style="background: rgba(255,255,255,0.05); border: 1px solid var(--card-border); border-radius: var(--border-radius-sm); padding: 15px; color: var(--text-secondary); cursor: pointer; text-align: right;" data-text="Hello, how are you?">
                                Hello, how are you?
                            </button>
                            <button class="text-example" style="background: rgba(255,255,255,0.05); border: 1px solid var(--card-border); border-radius: var(--border-radius-sm); padding: 15px; color: var(--text-secondary); cursor: pointer; text-align: right;" data-text="Ğ¡ĞºĞ¾Ğ»ÑŒĞºĞ¾ ÑÑ‚Ğ¾Ğ¸Ñ‚ Ğ´Ğ¾Ğ»Ğ»Ğ°Ñ€ ÑĞµĞ³Ğ¾Ğ´Ğ½Ñ?">
                                Ğ¡ĞºĞ¾Ğ»ÑŒĞºĞ¾ ÑÑ‚Ğ¾Ğ¸Ñ‚ Ğ´Ğ¾Ğ»Ğ»Ğ°Ñ€ ÑĞµĞ³Ğ¾Ğ´Ğ½Ñ?
                            </button>
                        </div>
                    </div>
                </div>
            `;
            
            setTimeout(() => {
                document.getElementById('translateBtn').addEventListener('click', translateText);
                document.getElementById('copyTranslation').addEventListener('click', copyTranslation);
                
                document.querySelectorAll('.text-example').forEach(btn => {
                    btn.addEventListener('click', function() {
                        document.getElementById('translateInput').value = this.getAttribute('data-text');
                        translateText();
                    });
                });
            }, 100);
        }
        
        function translateText() {
            const input = document.getElementById('translateInput').value;
            const targetLang = document.getElementById('targetLang').value;
            const output = document.getElementById('translatedText');
            
            if (!input.trim()) {
                output.innerHTML = '<p style="color: #f87171;">Ù„Ø·ÙØ§Ù‹ Ù…ØªÙ†ÛŒ Ø¨Ø±Ø§ÛŒ ØªØ±Ø¬Ù…Ù‡ ÙˆØ§Ø±Ø¯ Ú©Ù†ÛŒØ¯.</p>';
                return;
            }
            
            // ØªØ´Ø®ÛŒØµ Ø²Ø¨Ø§Ù† Ù…Ø¨Ø¯Ø£
            let sourceLang = 'en';
            if (/[\u0600-\u06FF]/.test(input)) sourceLang = 'fa';
            else if (/[\u0400-\u04FF]/.test(input)) sourceLang = 'ru';
            
            // ØªØ±Ø¬Ù…Ù‡ Ø³Ø§Ø¯Ù‡
            const translationsMap = {
                'en-fa': {
                    'Hello': 'Ø³Ù„Ø§Ù…',
                    'how are you': 'Ø­Ø§Ù„Øª Ú†Ø·ÙˆØ± Ø§Ø³Øª',
                    'dollar': 'Ø¯Ù„Ø§Ø±',
                    'today': 'Ø§Ù…Ø±ÙˆØ²',
                    'bank': 'Ø¨Ø§Ù†Ú©',
                    'rate': 'Ù†Ø±Ø®'
                },
                'ru-fa': {
                    'Ğ¡ĞºĞ¾Ğ»ÑŒĞºĞ¾ ÑÑ‚Ğ¾Ğ¸Ñ‚': 'Ú†Ù‚Ø¯Ø± Ù‡Ø²ÛŒÙ†Ù‡ Ø¯Ø§Ø±Ø¯',
                    'Ğ´Ğ¾Ğ»Ğ»Ğ°Ñ€': 'Ø¯Ù„Ø§Ø±',
                    'ÑĞµĞ³Ğ¾Ğ´Ğ½Ñ': 'Ø§Ù…Ø±ÙˆØ²'
                },
                'fa-en': {
                    'Ø³Ù„Ø§Ù…': 'Hello',
                    'Ø¯Ù„Ø§Ø±': 'dollar',
                    'Ø§Ù…Ø±ÙˆØ²': 'today',
                    'Ø¨Ø§Ù†Ú©': 'bank'
                }
            };
            
            let translated = input;
            const key = `${sourceLang}-${targetLang}`;
            
            if (translationsMap[key]) {
                for (const [word, trans] of Object.entries(translationsMap[key])) {
                    translated = translated.replace(new RegExp(word, 'gi'), trans);
                }
            }
            
            if (translated === input) {
                translated = `[ØªØ±Ø¬Ù…Ù‡ Ø¢Ø²Ù…Ø§ÛŒØ´ÛŒ]\n${input}\n\n(Ø²Ø¨Ø§Ù† Ù…Ø¨Ø¯Ø£: ${sourceLang === 'fa' ? 'ÙØ§Ø±Ø³ÛŒ' : sourceLang === 'en' ? 'Ø§Ù†Ú¯Ù„ÛŒØ³ÛŒ' : 'Ø±ÙˆØ³ÛŒ'})\n(Ø²Ø¨Ø§Ù† Ù…Ù‚ØµØ¯: ${targetLang === 'fa' ? 'ÙØ§Ø±Ø³ÛŒ' : targetLang === 'en' ? 'Ø§Ù†Ú¯Ù„ÛŒØ³ÛŒ' : 'Ø±ÙˆØ³ÛŒ'})`;
            }
            
            output.innerHTML = `<p style="white-space: pre-wrap;">${translated}</p>`;
        }
        
        function copyTranslation() {
            const text = document.getElementById('translatedText').innerText;
            navigator.clipboard.writeText(text).then(() => {
                showToast('Ù…ØªÙ† Ú©Ù¾ÛŒ Ø´Ø¯!');
            });
        }
        
        // ===== Ù¾Ù†Ù„ Ù…Ø§Ø´ÛŒÙ† Ø­Ø³Ø§Ø¨ =====
        function createCalculatorPanel(panel) {
            panel.innerHTML = `
                <div class="panel-header">
                    <button class="back-btn" onclick="closeCurrentPanel()">
                        <span class="icon">â†</span>
                        <span>${translations[currentLanguage].back}</span>
                    </button>
                    <h2><span class="icon">ğŸ§®</span> <span>${translations[currentLanguage].calculator}</span></h2>
                </div>
                <div style="padding: 20px;">
                    <div class="calculator-container">
                        <div class="calculator-display">
                            <input type="text" id="calcDisplay" value="0" readonly>
                        </div>
                        
                        <div class="calculator-buttons">
                            <button class="calc-btn" data-action="clear">C</button>
                            <button class="calc-btn" data-action="backspace">âŒ«</button>
                            <button class="calc-btn" data-action="percentage">%</button>
                            <button class="calc-btn" data-action="divide">Ã·</button>
                            
                            <button class="calc-btn" data-number="7">7</button>
                            <button class="calc-btn" data-number="8">8</button>
                            <button class="calc-btn" data-number="9">9</button>
                            <button class="calc-btn" data-action="multiply">Ã—</button>
                            
                            <button class="calc-btn" data-number="4">4</button>
                            <button class="calc-btn" data-number="5">5</button>
                            <button class="calc-btn" data-number="6">6</button>
                            <button class="calc-btn" data-action="subtract">-</button>
                            
                            <button class="calc-btn" data-number="1">1</button>
                            <button class="calc-btn" data-number="2">2</button>
                            <button class="calc-btn" data-number="3">3</button>
                            <button class="calc-btn" data-action="add">+</button>
                            
                            <button class="calc-btn" data-number="0" style="grid-column: span 2;">0</button>
                            <button class="calc-btn" data-action="decimal">.</button>
                            <button class="calc-btn equals" data-action="equals">=</button>
                        </div>
                    </div>
                </div>
            `;
            
            setTimeout(() => {
                initCalculator();
            }, 100);
        }
        
        function initCalculator() {
            let currentInput = '0';
            let previousInput = null;
            let operation = null;
            
            function updateDisplay() {
                document.getElementById('calcDisplay').value = currentInput;
            }
            
            function inputNumber(num) {
                if (currentInput === '0') {
                    currentInput = num;
                } else {
                    currentInput += num;
                }
                updateDisplay();
            }
            
            function handleAction(action) {
                switch(action) {
                    case 'clear':
                        currentInput = '0';
                        previousInput = null;
                        operation = null;
                        break;
                    case 'backspace':
                        currentInput = currentInput.slice(0, -1) || '0';
                        break;
                    case 'percentage':
                        currentInput = (parseFloat(currentInput) / 100).toString();
                        break;
                    case 'decimal':
                        if (!currentInput.includes('.')) {
                            currentInput += '.';
                        }
                        break;
                    case 'equals':
                        if (previousInput && operation) {
                            const prev = parseFloat(previousInput);
                            const current = parseFloat(currentInput);
                            let result;
                            
                            switch(operation) {
                                case 'add': result = prev + current; break;
                                case 'subtract': result = prev - current; break;
                                case 'multiply': result = prev * current; break;
                                case 'divide': result = current === 0 ? 'Ø®Ø·Ø§' : prev / current; break;
                            }
                            
                            currentInput = result.toString();
                            previousInput = null;
                            operation = null;
                        }
                        break;
                    default:
                        // Ø¹Ù…Ù„ÛŒØ§Øª (+, -, Ã—, Ã·)
                        previousInput = currentInput;
                        operation = action;
                        currentInput = '0';
                        break;
                }
                updateDisplay();
            }
            
            document.querySelectorAll('.calc-btn').forEach(btn => {
                btn.addEventListener('click', () => {
                    const number = btn.getAttribute('data-number');
                    const action = btn.getAttribute('data-action');
                    
                    if (number !== null) {
                        inputNumber(number);
                    } else if (action !== null) {
                        handleAction(action);
                    }
                });
            });
        }
        
        // ===== Ù¾Ù†Ù„ ØªÙ†Ø¸ÛŒÙ…Ø§Øª =====
        function createSettingsPanel(panel) {
            panel.innerHTML = `
                <div class="panel-header">
                    <button class="back-btn" onclick="closeCurrentPanel()">
                        <span class="icon">â†</span>
                        <span>${translations[currentLanguage].back}</span>
                    </button>
                    <h2><span class="icon">âš™ï¸</span> <span>${translations[currentLanguage].settings}</span></h2>
                </div>
                <div style="padding: 20px;">
                    <div class="app-info-card">
                        <h3 style="color: var(--gold-text); margin-bottom: 20px; display: flex; align-items: center; gap: 15px;">
                            <span class="icon">â„¹ï¸</span>
                            <span>Ø¯Ø±Ø¨Ø§Ø±Ù‡ Ø¨Ø±Ù†Ø§Ù…Ù‡</span>
                        </h3>
                        
                        <div style="margin-bottom: 15px; color: var(--text-secondary);">
                            <strong>ØªÙˆØ³Ø¹Ù‡â€ŒØ¯Ù‡Ù†Ø¯Ù‡:</strong> Adb
                        </div>
                        <div style="margin-bottom: 15px; color: var(--text-secondary);">
                            <strong>Ù†Ø³Ø®Ù‡:</strong> 0326
                        </div>
                        <div style="margin-bottom: 25px; color: var(--text-secondary);">
                            <strong>Ø¢Ø®Ø±ÛŒÙ† Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ:</strong> Û±Û´ Ú˜Ø§Ù†ÙˆÛŒÙ‡ Û²Û°Û²Û¶
                        </div>
                        
                        <div style="margin: 25px 0; padding: 20px; background: rgba(255, 255, 255, 0.05); border-radius: var(--border-radius-sm);">
                            <h4 style="color: var(--gold-text); margin-bottom: 15px; display: flex; align-items: center; gap: 10px;">
                                <span class="icon">â­</span>
                                <span>ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§ÛŒ Ø¨Ø±Ù†Ø§Ù…Ù‡:</span>
                            </h4>
                            <ul style="list-style: none; padding-right: 20px;">
                                <li style="color: var(--text-secondary); margin-bottom: 10px; padding-right: 10px; position: relative;">
                                    <span class="icon" style="position: absolute; right: -20px;">âœ“</span>
                                    Ø®Ø¯Ù…Ø§Øª Ø¨Ø§Ù†Ú©ÛŒ Ùˆ Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ø²Ù†Ø¯Ù‡
                                </li>
                                <li style="color: var(--text-secondary); margin-bottom: 10px; padding-right: 10px; position: relative;">
                                    <span class="icon" style="position: absolute; right: -20px;">âœ“</span>
                                    Ø§Ø®Ø¨Ø§Ø± Ø§Ù‚ØªØµØ§Ø¯ÛŒ Ø±ÙˆØ² Ø§Ø² CBR
                                </li>
                                <li style="color: var(--text-secondary); margin-bottom: 10px; padding-right: 10px; position: relative;">
                                    <span class="icon" style="position: absolute; right: -20px;">âœ“</span>
                                    Ù‡ÙˆØ´ Ù…ØµÙ†ÙˆØ¹ÛŒ DeepSeek
                                </li>
                                <li style="color: var(--text-secondary); margin-bottom: 10px; padding-right: 10px; position: relative;">
                                    <span class="icon" style="position: absolute; right: -20px;">âœ“</span>
                                    Ù…ØªØ±Ø¬Ù… Ù‡ÙˆØ´Ù…Ù†Ø¯ Ø³Ù‡ Ø²Ø¨Ø§Ù†Ù‡
                                </li>
                                <li style="color: var(--text-secondary); margin-bottom: 10px; padding-right: 10px; position: relative;">
                                    <span class="icon" style="position: absolute; right: -20px;">âœ“</span>
                                    ÙˆØ¶Ø¹ÛŒØª Ø¢Ø¨ Ùˆ Ù‡ÙˆØ§ Ø¨Ù‡ ØµÙˆØ±Øª Ø²Ù†Ø¯Ù‡
                                </li>
                                <li style="color: var(--text-secondary); margin-bottom: 10px; padding-right: 10px; position: relative;">
                                    <span class="icon" style="position: absolute; right: -20px;">âœ“</span>
                                    Ù…Ø§Ø´ÛŒÙ† Ø­Ø³Ø§Ø¨ Ù¾ÛŒØ´Ø±ÙØªÙ‡
                                </li>
                            </ul>
                        </div>
                        
                        <div style="margin-top: 25px; padding-top: 20px; border-top: 1px solid rgba(255, 255, 255, 0.1);">
                            <h4 style="color: var(--gold-text); margin-bottom: 15px; display: flex; align-items: center; gap: 10px;">
                                <span class="icon">ğŸ“</span>
                                <span>Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ:</span>
                            </h4>
                            <p style="color: var(--text-secondary); margin-bottom: 10px;">MB Bank Ø±ÙˆØ³ÛŒÙ‡</p>
                            <p style="color: var(--text-secondary); margin-bottom: 10px;">
                                <span>ØªÙ„ÙÙ†:</span>
                                <span style="direction: ltr; font-family: monospace;"> +7 800 500-07-51</span>
                            </p>
                            <p style="color: var(--text-secondary); margin-bottom: 10px;">
                                <span>Ø§ÛŒÙ…ÛŒÙ„:</span>
                                <span style="direction: ltr; font-family: monospace;"> info@mbbru.ru</span>
                            </p>
                        </div>
                    </div>
                    
                    <div style="display: flex; gap: 20px; margin-top: 25px;">
                        <button style="flex: 1; padding: 18px; background: rgba(239, 68, 68, 0.2); color: #fecaca; border: 2px solid #f87171; border-radius: 15px; font-size: 1.1rem; font-weight: 700; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 12px;" id="clearCacheBtn">
                            <span class="icon">ğŸ—‘ï¸</span>
                            <span>${translations[currentLanguage].clearCache}</span>
                        </button>
                        <button style="flex: 1; padding: 18px; background: linear-gradient(45deg, var(--accent-teal), var(--accent-teal-light)); color: var(--primary-bg); border: 2px solid var(--accent-teal); border-radius: 15px; font-size: 1.1rem; font-weight: 700; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 12px;" id="refreshDataBtn">
                            <span class="icon">ğŸ”„</span>
                            <span>${translations[currentLanguage].refreshAll}</span>
                        </button>
                    </div>
                </div>
            `;
            
            setTimeout(() => {
                document.getElementById('clearCacheBtn').addEventListener('click', () => {
                    if (confirm('Ø¢ÛŒØ§ Ù…ÛŒâ€ŒØ®ÙˆØ§Ù‡ÛŒØ¯ Ø­Ø§ÙØ¸Ù‡ Ù…ÙˆÙ‚Øª Ù¾Ø§Ú© Ø´ÙˆØ¯ØŸ')) {
                        localStorage.clear();
                        showToast('Ø­Ø§ÙØ¸Ù‡ Ù…ÙˆÙ‚Øª Ù¾Ø§Ú© Ø´Ø¯!');
                    }
                });
                
                document.getElementById('refreshDataBtn').addEventListener('click', () => {
                    showToast('Ù‡Ù…Ù‡ Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø´Ø¯Ù†Ø¯!');
                });
            }, 100);
        }
        
        // ===== Ù¾Ù†Ù„ ÙˆØ¶Ø¹ÛŒØª Ù‡ÙˆØ§ =====
        function createWeatherPanel(panel) {
            panel.innerHTML = `
                <div class="panel-header">
                    <button class="back-btn" onclick="closeCurrentPanel()">
                        <span class="icon">â†</span>
                        <span>${translations[currentLanguage].back}</span>
                    </button>
                    <h2><span class="icon">â˜ï¸</span> <span>${translations[currentLanguage].weather}</span></h2>
                </div>
                <div style="padding: 20px;">
                    <div style="background: var(--card-bg); border: 1px solid var(--card-border); border-radius: var(--border-radius); padding: 30px; margin-bottom: 25px;">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <div>
                                <h3 style="font-size: 1.5rem; color: var(--gold-text); margin-bottom: 10px;">Ù…Ø³Ú©Ùˆ</h3>
                                <div style="font-size: 3.5rem; font-weight: 700; background: linear-gradient(45deg, var(--accent-teal), var(--gold-text)); -webkit-background-clip: text; background-clip: text; color: transparent;">-Û²Â°C</div>
                                <p style="color: var(--text-secondary); font-size: 1.1rem; margin-top: 5px;">Ø¨Ø±ÙÛŒ</p>
                                <p style="color: var(--text-secondary);">Ø§Ø­Ø³Ø§Ø³: -ÛµÂ°C</p>
                            </div>
                            <div style="font-size: 5rem;">â„ï¸</div>
                        </div>
                    </div>
                    
                    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 15px;">
                        <div style="background: rgba(255, 255, 255, 0.05); border-radius: var(--border-radius-sm); padding: 20px; text-align: center;">
                            <span class="icon" style="font-size: 1.8rem; margin-bottom: 10px;">ğŸ’§</span>
                            <p style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 5px;">Ø±Ø·ÙˆØ¨Øª</p>
                            <h4 style="font-size: 1.2rem;">Û¸ÛµÙª</h4>
                        </div>
                        
                        <div style="background: rgba(255, 255, 255, 0.05); border-radius: var(--border-radius-sm); padding: 20px; text-align: center;">
                            <span class="icon" style="font-size: 1.8rem; margin-bottom: 10px;">ğŸ’¨</span>
                            <p style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 5px;">Ø³Ø±Ø¹Øª Ø¨Ø§Ø¯</p>
                            <h4 style="font-size: 1.2rem;">Û±Û² km/h</h4>
                        </div>
                        
                        <div style="background: rgba(255, 255, 255, 0.05); border-radius: var(--border-radius-sm); padding: 20px; text-align: center;">
                            <span class="icon" style="font-size: 1.8rem; margin-bottom: 10px;">âš–ï¸</span>
                            <p style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 5px;">ÙØ´Ø§Ø± Ù‡ÙˆØ§</p>
                            <h4 style="font-size: 1.2rem;">Û±Û°Û±Û³ hPa</h4>
                        </div>
                        
                        <div style="background: rgba(255, 255, 255, 0.05); border-radius: var(--border-radius-sm); padding: 20px; text-align: center;">
                            <span class="icon" style="font-size: 1.8rem; margin-bottom: 10px;">ğŸ‘ï¸</span>
                            <p style="color: var(--text-secondary); font-size: 0.9rem; margin-bottom: 5px;">Ø¯ÛŒØ¯</p>
                            <h4 style="font-size: 1.2rem;">Û±Û° Ú©ÛŒÙ„ÙˆÙ…ØªØ±</h4>
                        </div>
                    </div>
                    
                    <div style="margin-top: 25px; padding: 15px; background: rgba(255, 255, 255, 0.05); border-radius: var(--border-radius-sm);">
                        <div style="display: flex; align-items: center; gap: 10px; color: var(--text-secondary);">
                            <span class="icon">â„¹ï¸</span>
                            <span>Ù…Ù†Ø¨Ø¹: Ø³Ø±ÙˆÛŒØ³ Ù‡ÙˆØ§Ø´Ù†Ø§Ø³ÛŒ Ø±ÙˆØ³ÛŒÙ‡ - Ø¢Ø®Ø±ÛŒÙ† Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ: ${new Date().toLocaleTimeString('fa-IR')}</span>
                        </div>
                    </div>
                </div>
            `;
        }
        
        // ===== Ù¾Ù†Ù„ Ø§Ø®Ø¨Ø§Ø± =====
        function createNewsPanel(panel) {
            panel.innerHTML = `
                <div class="panel-header">
                    <button class="back-btn" onclick="closeCurrentPanel()">
                        <span class="icon">â†</span>
                        <span>${translations[currentLanguage].back}</span>
                    </button>
                    <h2><span class="icon">ğŸ“°</span> <span>${translations[currentLanguage].cbrNews}</span></h2>
                </div>
                <div style="padding: 20px;">
                    <div style="display: grid; gap: 20px;">
                        <div style="background: var(--card-bg); border: 1px solid var(--card-border); border-radius: var(--border-radius-sm); padding: 25px;">
                            <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 15px;">
                                <h3 style="font-size: 1.2rem; color: var(--gold-text); flex: 1;">Ø¨Ø§Ù†Ú© Ù…Ø±Ú©Ø²ÛŒ Ù†Ø±Ø® Ú©Ù„ÛŒØ¯ÛŒ Ø±Ø§ Ø¯Ø± Ø³Ø·Ø­ Û±Û¶Ùª Ø­ÙØ¸ Ú©Ø±Ø¯</h3>
                                <div style="color: var(--text-secondary); font-size: 0.9rem; white-space: nowrap; margin-right: 15px;">Û±Û´ Ú˜Ø§Ù†ÙˆÛŒÙ‡ Û²Û°Û²Û¶</div>
                            </div>
                            <div style="color: var(--text-secondary); line-height: 1.8; margin-bottom: 15px;">
                                <p>Ø¨Ø§Ù†Ú© Ù…Ø±Ú©Ø²ÛŒ Ø±ÙˆØ³ÛŒÙ‡ Ø¯Ø± Ø¬Ù„Ø³Ù‡ Ø§Ù…Ø±ÙˆØ² Ø®ÙˆØ¯ ØªØµÙ…ÛŒÙ… Ú¯Ø±ÙØª Ù†Ø±Ø® Ú©Ù„ÛŒØ¯ÛŒ Ø±Ø§ Ø¯Ø± Ø³Ø·Ø­ Û±Û¶Ùª Ø­ÙØ¸ Ú©Ù†Ø¯. Ø§ÛŒÙ† ØªØµÙ…ÛŒÙ… Ø¨Ø§ ØªÙˆØ¬Ù‡ Ø¨Ù‡ Ú©Ø§Ù‡Ø´ ØªÙˆØ±Ù… Ùˆ Ø«Ø¨Ø§Øª Ù†Ø³Ø¨ÛŒ Ø¯Ø± Ø¨Ø§Ø²Ø§Ø±Ù‡Ø§ÛŒ Ù…Ø§Ù„ÛŒ Ø§ØªØ®Ø§Ø° Ø´Ø¯Ù‡ Ø§Ø³Øª.</p>
                            </div>
                            <a href="https://cbr.ru/press/event/?id=13579" target="_blank" style="display: inline-flex; align-items: center; gap: 8px; color: var(--accent-teal); text-decoration: none; font-weight: 600;">
                                <span class="icon">â†—ï¸</span>
                                Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ø®Ø¨Ø± Ø§ØµÙ„ÛŒ
                            </a>
                        </div>
                        
                        <div style="background: var(--card-bg); border: 1px solid var(--card-border); border-radius: var(--border-radius-sm); padding: 25px;">
                            <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: 15px;">
                                <h3 style="font-size: 1.2rem; color: var(--gold-text); flex: 1;">Ø±Ø´Ø¯ Ø§Ù‚ØªØµØ§Ø¯ÛŒ Ø±ÙˆØ³ÛŒÙ‡ Ø¯Ø± Ø³Ø§Ù„ Û²Û°Û²Ûµ Ù…Ø«Ø¨Øª Ø¨ÙˆØ¯</h3>
                                <div style="color: var(--text-secondary); font-size: 0.9rem; white-space: nowrap; margin-right: 15px;">Û±Û³ Ú˜Ø§Ù†ÙˆÛŒÙ‡ Û²Û°Û²Û¶</div>
                            </div>
                            <div style="color: var(--text-secondary); line-height: 1.8; margin-bottom: 15px;">
                                <p>Ø¨Ø± Ø§Ø³Ø§Ø³ Ú¯Ø²Ø§Ø±Ø´ Ø¨Ø§Ù†Ú© Ù…Ø±Ú©Ø²ÛŒØŒ Ø§Ù‚ØªØµØ§Ø¯ Ø±ÙˆØ³ÛŒÙ‡ Ø¯Ø± Ø³Ø§Ù„ Û²Û°Û²Ûµ Ø±Ø´Ø¯ Û²Ù«Û´Ùª Ø±Ø§ ØªØ¬Ø±Ø¨Ù‡ Ú©Ø±Ø¯ Ú©Ù‡ Ø¨Ø§Ù„Ø§ØªØ± Ø§Ø² Ù¾ÛŒØ´â€ŒØ¨ÛŒÙ†ÛŒâ€ŒÙ‡Ø§ÛŒ Ù‚Ø¨Ù„ÛŒ Ø§Ø³Øª.</p>
                            </div>
                            <a href="https://cbr.ru/statistics/macro/?id=14236" target="_blank" style="display: inline-flex; align-items: center; gap: 8px; color: var(--accent-teal); text-decoration: none; font-weight: 600;">
                                <span class="icon">â†—ï¸</span>
                                Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ú¯Ø²Ø§Ø±Ø´
                            </a>
                        </div>
                    </div>
                </div>
            `;
        }
        
        // ===== ØªØ§Ø¨Ø¹â€ŒÙ‡Ø§ÛŒ Ú©Ù…Ú©ÛŒ =====
        function showToast(message) {
            const toast = document.createElement('div');
            toast.style.cssText = `
                position: fixed;
                bottom: 20px;
                left: 50%;
                transform: translateX(-50%) translateY(100px);
                background: rgba(45, 212, 191, 0.9);
                color: #0a3d2f;
                padding: 12px 24px;
                border-radius: 12px;
                font-weight: 600;
                z-index: 9999;
                transition: transform 0.3s ease;
                backdrop-filter: blur(10px);
                border: 1px solid rgba(255, 255, 255, 0.2);
                box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            `;
            toast.textContent = message;
            document.body.appendChild(toast);
            
            setTimeout(() => {
                toast.style.transform = 'translateX(-50%) translateY(0)';
            }, 100);
            
            setTimeout(() => {
                toast.style.transform = 'translateX(-50%) translateY(100px)';
                setTimeout(() => document.body.removeChild(toast), 300);
            }, 3000);
        }
        
        // ===== ØªÙ†Ø¸ÛŒÙ… Event Listeners =====
        function setupEventListeners() {
            // Ø¯Ú©Ù…Ù‡â€ŒÙ‡Ø§ÛŒ Ø§ØµÙ„ÛŒ
            document.getElementById('reportBtn').addEventListener('click', () => openPanel('reportPanel'));
            document.getElementById('newsBtn').addEventListener('click', () => openPanel('newsPanel'));
            document.getElementById('weatherBtn').addEventListener('click', () => openPanel('weatherPanel'));
            document.getElementById('aiBtn').addEventListener('click', () => openPanel('aiPanel'));
            document.getElementById('translatorBtn').addEventListener('click', () => openPanel('translatorPanel'));
            document.getElementById('calculatorBtn').addEventListener('click', () => openPanel('calculatorPanel'));
            document.getElementById('settingsBtn').addEventListener('click', () => openPanel('settingsPanel'));
            
            // Ø¯Ú©Ù…Ù‡ Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ù…Ø§
            document.getElementById('contactBtn').addEventListener('click', function(e) {
                e.stopPropagation();
                const menu = document.getElementById('contactMenu');
                menu.classList.toggle('active');
            });
            
            // Ø¨Ø³ØªÙ† Ù…Ù†ÙˆÛŒ Ø§Ø±ØªØ¨Ø§Ø· Ø¨Ø§ Ù…Ø§ Ø¨Ø§ Ú©Ù„ÛŒÚ© Ø®Ø§Ø±Ø¬
            document.addEventListener('click', function(e) {
                if (!e.target.closest('#contactBtn') && !e.target.closest('#contactMenu')) {
                    document.getElementById('contactMenu').classList.remove('active');
                }
            });
            
            // ØªØºÛŒÛŒØ± Ø²Ø¨Ø§Ù†
            document.getElementById('languageSelect').addEventListener('change', function(e) {
                changeLanguage(e.target.value);
            });
            
            // Overlay Ú©Ù„ÛŒÚ©
            document.getElementById('overlay').addEventListener('click', closeCurrentPanel);
            
            // Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø¯Ù…Ø§ÛŒ Ù‡ÙˆØ§
            setInterval(() => {
                const temp = Math.floor(Math.random() * 6) - 5;
                document.getElementById('currentTemp').textContent = `${temp}Â°C`;
            }, 30000);
        }
        
        // ===== Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ø¨Ø±Ù†Ø§Ù…Ù‡ =====
        function initApp() {
            console.log("MirApp Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ Ø´Ø¯!");
            
            // Ø¨Ø§Ø±Ú¯Ø°Ø§Ø±ÛŒ Ø²Ø¨Ø§Ù† Ø°Ø®ÛŒØ±Ù‡ Ø´Ø¯Ù‡
            const savedLang = localStorage.getItem('mirAppLanguage') || 'fa';
            document.getElementById('languageSelect').value = savedLang;
            changeLanguage(savedLang);
            
            // Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ ØªØ§Ø±ÛŒØ® Ùˆ Ø²Ù…Ø§Ù†
            updateDateTime();
            setInterval(updateDateTime, 1000);
            
            // ØªÙ†Ø¸ÛŒÙ… Event Listeners
            setupEventListeners();
            
            // Ù†Ù…Ø§ÛŒØ´ Ù¾ÛŒØ§Ù… Ø®ÙˆØ´â€ŒØ¢Ù…Ø¯Ú¯ÙˆÛŒÛŒ
            setTimeout(() => {
                showToast('Ø¨Ù‡ MirApp Ø®ÙˆØ´ Ø¢Ù…Ø¯ÛŒØ¯!');
            }, 1000);
        }
        
        // Ø´Ø±ÙˆØ¹ Ø¨Ø±Ù†Ø§Ù…Ù‡
        document.addEventListener('DOMContentLoaded', initApp);
        
        // ØªÙˆØ§Ø¨Ø¹ Ø¹Ù…ÙˆÙ…ÛŒ
        window.openPanel = openPanel;
        window.closeCurrentPanel = closeCurrentPanel;
    </script>
</body>
</html>
